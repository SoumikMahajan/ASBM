@model ASBM.Models.MultipleModel
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container">
    <div class="container" style="background-color: white; color: black; padding-bottom: 20px;">
        <div class="row no-gutters">
            <div class="flex-column justify-content-center about-content" style="width: 100% !important;">
                <div class="section-title">
                    <h2>VOUCHER GENERATOR</h2>
                </div>
            </div>
        </div>

        <div class="container" style="background-color: beige;">

            <form id="voucher" method="post" style="display:block;">
                <div class="row form-group">
                    <div class="col-md-2">
                        <label>Select Docket Type :</label>
                    </div>
                    <div class="col-md-6">
                        @*<div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" id="randomRadio1" value="1">
                                <label class="form-check-label" for="inlineRadio1">Random</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" id="sbRadio2" value="2">
                                <label class="form-check-label" for="inlineRadio2">SB</label>
                            </div>*@

                        <div class="form-check form-check-inline">
                            <input type="radio" class="form-check-input" id="radio1" name="optradio" value="1">NB
                            <label class="form-check-label" for="radio1"></label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input type="radio" class="form-check-input" id="radio2" name="optradio" value="2">Random
                            <label class="form-check-label" for="radio2"></label>
                        </div>
                    </div>

                </div>

                <div class="row form-group">
                    <div class="col-md-6">
                        <label>Choose Docket No from the List :</label>
                        <select id="ddlDocketNo" class="form-control placeholder-no-fix selectpicker" data-show-subtext="true" data-live-search="true">
                            <option value="0"> -- Select -- </option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <button type="button" class="btn btn-info" id="btn_submit" style="margin-top: 17px;">PROCEED</button>
                    </div>
                </div>
                <hr />

                <div class="row form-group">
                    <div class="col-md-3"><h6>1. Do you have CIC Number</h6></div>
                    <div class="col-md-2">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" id="cicrandomRadio1" name="cicradio" value="1">
                            <label class="form-check-label" for="inlineRadio1">Yes</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" id="cicrandomRadio2" name="cicradio" value="0">
                            <label class="form-check-label" for="inlineRadio2">No</label>
                        </div>
                    </div>
                    <div class="col-md-7">
                        <div class="form-check form-check-inline" id="cicnoHide">
                            <label class="">If Yes then CIC No :</label>
                            <input class="form-control placeholder-no-fix inputsm" type="text" name="" id="cic_input_no" value="">
                        </div>
                    </div>
                </div>

                <div class="row form-group">
                    <div class="col-md-3"><h6>2. Do you Participate in e-Tender</h6></div>
                    <div class="col-md-2">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" id="eTenRadioOption1" name="tenradio" value="1">
                            <label class="form-check-label">Yes</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" id="eTenRadioOption2" name="tenradio" value="0">
                            <label class="form-check-label">No</label>
                        </div>
                    </div>
                    <div class="col-md-7">
                        <div class="form-check form-check-inline" id="tennoHide">
                            <label class="">If Yes Then Tender No :</label>
                            <input class="form-control placeholder-no-fix inputsm" type="text" name="" id="ten_input_no" value="">
                        </div>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-md-3"><h6>3. MED Approval</h6></div>
                    <div class="col-md-2">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" id="medRadio1" name="medradio" value="1">
                            <label class="form-check-label">Yes</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" id="medRadio2" name="medradio" value="0">
                            <label class="form-check-label">No</label>
                        </div>
                    </div>
                    <div class="col-md-7">
                        <div class="form-check form-check-inline" id="mednoHide">
                            <label class="">MED Vetting Date :</label>
                            <input class="form-control placeholder-no-fix inputsm" type="date" name="" id="med_input_no" value="">
                        </div>
                    </div>
                </div>

                <div class="row form-group">
                    <div class="col-md-4">
                        <label>4.Date of Meeting of Tender Committee: </label>
                        <input type="date" id="txtMeetingTendeCommittee" placeholder="" class="form-control placeholder-no-fix" autocomplete="off" value="">
                    </div>
                    <div class="col-md-4">
                        <label>5. Date of Meeting of Chairman in Council Reg : </label>
                        <input type="date" id="txtMeetingChairman" placeholder="" class="form-control placeholder-no-fix" autocomplete="off" value="">
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-md-4">
                        <label>6. Acceptance of Tender Rate Rs : </label>
                        <input type="number" id="txtAcceptanceTender" placeholder="" class="form-control placeholder-no-fix" autocomplete="off" value="">
                    </div>
                    <div class="col-md-4">
                        <label>7.Date of Meeting of BOC for Sanction of expenditure : </label>
                        <input type="date" id="txtMeetingBOC" placeholder="" name="txtMeetingBOC" class="form-control placeholder-no-fix" autocomplete="off">
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-md-3"><h6>8.AA & FS No. of Government</h6></div>
                    <div class="col-md-2">
                        <input type="number" id="txtAAFSNo" placeholder="" class="form-control placeholder-no-fix" autocomplete="off" value="">
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-md-3"><h6>9.Work Order No.</h6></div>
                    <div class="col-md-2">
                        <input type="number" id="txtWorkOrder" placeholder="" class="form-control placeholder-no-fix" autocomplete="off" value="">
                    </div>
                    <div class="col-md-3"><h6>Work Order Date.</h6></div>
                    <div class="col-md-2">
                        <input type="date" id="txtWorkOrderDate" placeholder="" class="form-control placeholder-no-fix" autocomplete="off" value="">
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-md-3"><h6>10.Amount of Estimate</h6></div>
                    <div class="col-md-2">
                        <input type="number" id="txtAmountEstimate" placeholder="" class="form-control placeholder-no-fix" autocomplete="off" value="">
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-md-3"><h6>11.MB Book No.</h6></div>
                    <div class="col-md-2">
                        <input type="number" id="txtMBBookNo" placeholder="" name="txtSoleProprietorName" class="form-control placeholder-no-fix" autocomplete="off" value="">
                    </div>
                    <div class="col-md-3"><h6>Page No.</h6></div>
                    <div class="col-md-2">
                        <input type="number" id="txtPageNo" placeholder="" name="txtSoleProprietorName" class="form-control placeholder-no-fix" autocomplete="off" value="">
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-md-3"><h6>12.Work Register No.</h6></div>
                    <div class="col-md-2">
                        <input type="number" id="txtWorkRegisterNo" placeholder="" name="txtSoleProprietorName" class="form-control placeholder-no-fix" autocomplete="off" value="">
                    </div>
                    <div class="col-md-3"><h6>Work Register Date.</h6></div>
                    <div class="col-md-2">
                        <input type="date" id="txtWorkRegisterDate" placeholder="" name="txtSoleProprietorName" class="form-control placeholder-no-fix" autocomplete="off" value="">
                    </div>
                </div>

                <div class="form-group row justify-content-center text-center">
                    <div class="col-sm-12">
                        <button type="button" class="btn btn-info" id="btn_approved">Approved</button>
                        <button type="button" class="btn btn-info" id="btn_reject">Reject</button>
                    </div>
                </div>
            </form>

        </div>
    </div>

    @*for SB*@
    <div id="afterVoucherApprovedForNormal">
        <div class="container" style="background-color: white; color: black; padding-bottom: 20px;" id="billDetailsShowHide">
            <div class="row no-gutters">
                <div class="flex-column justify-content-center about-content" style="width: 100% !important;">
                    <div class="section-title">
                        <h2>Bill Details of the Docket No</h2>
                    </div>
                </div>
            </div>

            <div class="container" style="background-color: beige;">

                <form id="" method="post" class="" style="display:block;">

                    <div class="row form-group">
                        <div class="col-md-6">
                            <label for="exampleInputEmail1">Category of Company: </label>
                            <input type="text" class="form-control" id="txtCompanycat" placeholder="Enter Category of Company">
                        </div>
                        <div class="col-md-6">
                            <label for="exampleInputEmail1">Type Of Work: </label>
                            <input type="text" class="form-control" id="txtTypeWork" placeholder="Enter Type Of Work">
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-md-6">
                            <label for="exampleInputEmail1">Company Name: </label>
                            <input type="text" class="form-control" id="txtCompanyname" placeholder="Enter Company Name">
                        </div>
                        <div class="col-md-6">
                            <label for="exampleInputEmail1">Department Name: </label>
                            <input type="text" class="form-control" id="txtDepartment" placeholder="Enter Department Name">
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-md-6">
                            <label for="exampleInputEmail1">Fund Name: </label>
                            <input type="text" class="form-control" id="txtFund" placeholder="Enter Fund Name">
                        </div>
                        <div class="col-md-6">
                            <label for="exampleInputEmail1">Bill Amount: </label>
                            <input type="number" class="form-control" id="txtbillamount" placeholder="Enter Bill Amount">
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-md-6">
                            <label for="exampleInputEmail1">Pan No: </label>
                            <input type="text" class="form-control" id="txtpan" placeholder="Enter Mobile No">
                        </div>
                        <div class="col-md-6">
                            <label for="exampleInputEmail1">GST No: </label>
                            <input type="text" class="form-control" id="txtgst" placeholder="Enter GST No">
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-md-12">
                            <label for="exampleInputEmail1">Description of Work: </label>
                            <textarea type="text" class="form-control" id="txtdescription" placeholder="Enter Mobile No"></textarea>
                        </div>                       
                    </div>
                    <div class="form-group row justify-content-center text-center">
                        <div class="col-sm-12">
                            <button type="button" class="btn btn-info" id="btn_submit">Submit</button>
                            <button type="button" class="btn btn-info" id="btn_print">Print</button>
                        </div>
                    </div>
                </form>

            </div>
        </div>
    </div>

    @*for Random*@
    <!--<div id="afterVoucherApprovedForRandom">
       
    </div>-->

</div>

<script>
    $(document).ready(function () {
        showhideForVendorGenerator();
        function showhideForVendorGenerator() {
            document.getElementById('cicrandomRadio2').checked = true;
            document.getElementById('eTenRadioOption2').checked = true;
            document.getElementById('medRadio2').checked = true;
            $("#cicnoHide").hide();
            $("#tennoHide").hide();
            $("#mednoHide").hide();
            $("#billDetailsShowHide").hide();

        }
        $(document).on("click", "#cicrandomRadio1", function () {
            $("#cicnoHide").show(300);
            document.getElementById('cicrandomRadio2').checked = false;
        });
        $(document).on("click", "#cicrandomRadio2", function () {
            $("#cicnoHide").hide();
            document.getElementById('cicrandomRadio1').checked = false;
        });

        $(document).on("click", "#eTenRadioOption1", function () {
            $("#tennoHide").show(300);
            document.getElementById('eTenRadioOption2').checked = false;
        });
        $(document).on("click", "#eTenRadioOption2", function () {
            $("#tennoHide").hide();
            document.getElementById('eTenRadioOption1').checked = false;
        });
        $(document).on("click", "#medRadio1", function () {
            $("#mednoHide").show(300);
            document.getElementById('medRadio2').checked = false;
        });
        $(document).on("click", "#medRadio2", function () {
            $("#mednoHide").hide();
            document.getElementById('medRadio1').checked = false;
        });

        //$(document).on("click", "#btn_approved", function () {
            
        //});

        $('input[name=optradio]').change(function () {
            debugger;
            var value = parseInt($('input[name=optradio]:checked').val());
            fetchDocketNo(value);
        });

        function fetchDocketNo(value) {
            //debugger;
            var html = "";
            $.ajax({
                type: "GET",
                async: false,
                dataType: "text",
                contentType: "application/json; charset=utf-8",
                url: "/VoucherGenerator/GetAllDocketNo/?radioVal=" + value,
                success: function (data) {
                    html = data;
                    $("#ddlDocketNo").html(html);
                }
            });
            return html;
        }




        $(document).on('click', '#btn_approved', function () {
            debugger;
            var BillDocketType = $("input:radio[name=optradio]:checked").val();
            var billdocketno = $("#ddlDocketNo option:selected").text();
            var iscic = $("input:radio[name=cicradio]:checked").val();
            var cicno = $("#cic_input_no").val().trim();
            var isetender = $("input:radio[name=tenradio]:checked").val();
            var tenno = $("#ten_input_no").val().trim();
            var ismed = $("input:radio[name=medradio]:checked").val();
            var medno = $("#med_input_no").val().trim();
            var MeetingTenderCommittee = $("#txtMeetingTendeCommittee").val();
            var MeetingChairman = $("#txtMeetingChairman").val();
            var Tenderrate = $("#txtAcceptanceTender").val().trim();
            var MeetingBOC = $("#txtMeetingBOC").val();
            var AAFSNo = $("#txtAAFSNo").val().trim();
            var WorkOrder = $("#txtWorkOrder").val().trim();
            var WorkOrderDate = $("#txtWorkOrderDate").val();
            var AmountEstimate = $("#txtAmountEstimate").val().trim();
            var MBBookNo = $("#txtMBBookNo").val().trim();
            var PageNo = $("#txtPageNo").val().trim();
            var WorkRegisterNo = $("#txtWorkRegisterNo").val().trim();
            var WorkRegisterDate = $("#txtWorkRegisterDate").val();

            if (BillDocketType == '1') {
                showbasedonBillType();
                $("#billDetailsShowHide").show(300);
            }
            
        });

        function showbasedonBillType() {
            debugger;
            var info = {
                billdocketno: $("#ddlDocketNo option:selected").text()
            };

            var url = '/VoucherGenerator/ajax_getbilldeatilsby_DocketNo';
            $.ajax({
                type: 'GET',
                async: false,
                url: url,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: info,
                success: function (data) {
                    if (data != "") {
                        //$("#afterVoucherApproved").html(data);
                        $('#txtCompanycat').val(data.bill_category_id_fk);
                        $('#txtCompanyname').val(data.bill_company_name);                       
                        //$('#txtTypeWork').val(data.bill_company_name);
                        //$('#txtDepartment').val(data.bill_company_name);
                        $('#txtpan').val(data.bill_pan);
                        $('#txtgst').val(data.bill_gst);
                        $('#txtdescription').val(data.bill_description);
                        $('#txtbillamount').val(data.bill_amount);
                        //$('#txtFund').val(data.bill_amount);
                    }
                }
            });
        }

        $(document).on('click', '#btn_submit', function () {
            debugger;
            Swal.fire({
                title: 'Are you sure?',
                text: "You won't be able to revert this!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes'
            }).then((result) => {
                if (result.isConfirmed) {
                    ApprovedVoucher();
                    $("#bill_form").trigger('reset');                   
                }
            })
        });

        function ApprovedVoucher() {
            debugger;
            var info = {               
                BillDocketType: $("input:radio[name=optradio]:checked").val(),
                billdocketno: $("#ddlDocketNo option:selected").text(),
                iscic : $("input:radio[name=cicradio]:checked").val(),
                cicno : $("#cic_input_no").val().trim(),
                isetender : $("input:radio[name=tenradio]:checked").val(),
                tenno : $("#ten_input_no").val().trim(),
                ismed : $("input:radio[name=medradio]:checked").val(),
                medno: $("#med_input_no").val().trim(),
                MeetingTenderCommittee: $("#txtMeetingTendeCommittee").val(),
                MeetingChairman : $("#txtMeetingChairman").val(),
                Tenderrate: $("#txtAcceptanceTender").val().trim(),
                MeetingBOC : $("#txtMeetingBOC").val(),
                AAFSNo : $("#txtAAFSNo").val().trim(),
                WorkOrder : $("#txtWorkOrder").val().trim(),
                WorkOrderDate : $("#txtWorkOrderDate").val(),
                AmountEstimate : $("#txtAmountEstimate").val().trim(),
                MBBookNo : $("#txtMBBookNo").val().trim(),
                PageNo : $("#txtPageNo").val().trim(),
                WorkRegisterNo : $("#txtWorkRegisterNo").val().trim(),
                WorkRegisterDate : $("#txtWorkRegisterDate").val()
            };

            var url = '/VoucherGenerator/ajax_approved_VoucherSubmission';
            $.ajax({
                type: 'POST',
                url: url,
                dataType: 'json',
                data: info,
                success: function (data) {
                    var check_result = data;
                    if (check_result == 1) {                       
                        swal.fire({
                            icon: 'success',
                            title: 'SAVED!',
                            text: 'Your file has been saved.'
                        }).then(function () {
                            location.reload();
                        });
                    }
                    else {                       
                        Swal.fire({
                            icon: 'error',
                            title: 'Oops...',
                            text: 'Something went wrong!',
                        })
                    }
                },
            });
        }
    });
</script>
